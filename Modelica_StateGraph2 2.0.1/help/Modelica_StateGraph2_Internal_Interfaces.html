<HTML>
<HEAD>
<TITLE>Modelica_StateGraph2.Internal.Interfaces</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Connectors and partial models&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Interfaces<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_StateGraph2.Internal.Interfaces"></A><A HREF="Modelica_StateGraph2_Internal.html#Modelica_StateGraph2.Internal"
>Modelica_StateGraph2.Internal</A>.Interfaces</H2>
<B>Connectors and partial models</B>
<P>
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.NodeS.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Node" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A>
</TD><TD>Node of a state machine to communicate information between steps (for suspend/resume actions and to guarantee a valid graph)</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Step_in_baseS.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Step_in_base" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Step_in_base"
>Step_in_base</A>
</TD><TD>Input port of a step without icon</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Step_in_baseS.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Step_out_base" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Step_out_base"
>Step_out_base</A>
</TD><TD>Output port of a step without icon</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Step_inS.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Step_in" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Step_in"
>Step_in</A>
</TD><TD>Input port of a step</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Step_outS.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Step_out" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Step_out"
>Step_out</A>
</TD><TD>Output port of a step</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Composite_resumeS.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Composite_resume" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Composite_resume"
>Composite_resume</A>
</TD><TD>Resume port of a composite step</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Composite_suspendS.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Composite_suspend" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Composite_suspend"
>Composite_suspend</A>
</TD><TD>Suspend port of a Composite</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Transition_in_baseS.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Transition_in_base" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Transition_in_base"
>Transition_in_base</A>
</TD><TD>Input port of a transition without an icon</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Transition_in_baseS.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Transition_out_base" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Transition_out_base"
>Transition_out_base</A>
</TD><TD>Output port of a transition without icon</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Transition_inS.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Transition_in" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Transition_in"
>Transition_in</A>
</TD><TD>Input port of a transition</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Transition_outS.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Transition_out" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Transition_out"
>Transition_out</A>
</TD><TD>Output port of a transition</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.EntryPortS.png" ALT="Modelica_StateGraph2.Internal.Interfaces.EntryPort" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.EntryPort"
>EntryPort</A>
</TD><TD>Entry port of a composite, same as a transition outPort</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.ExitPortS.png" ALT="Modelica_StateGraph2.Internal.Interfaces.ExitPort" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.ExitPort"
>ExitPort</A>
</TD><TD>Exit connector of a composite, same as transition inPort</TD></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.PartialParallelBase"
>PartialParallelBase</A>
</TD><TD>Base class of a parallel component (including a composite step as special case)</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Node<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_StateGraph2.Internal.Interfaces.Node"></A><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces"
>Modelica_StateGraph2.Internal.Interfaces</A>.Node</H2>
<B>Node of a state machine to communicate information between steps (for suspend/resume actions and to guarantee a valid graph)</B><p>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> Node <font color="darkgreen">
  &quot;Node of a state machine to communicate information between steps (for suspend/resume actions and to guarantee a valid graph)&quot;</font>
   Boolean suspend <font color="darkgreen">
    &quot;= true, if the composite step is terminated via a suspend port&quot;</font>;
   Boolean resume <font color="darkgreen">&quot;= true, if the composite step is entered via a resume port&quot;</font>;
   <textblock type="model" expanded="false" path="Modelica_StateGraph2.Internal.Interfaces.Node.equalityConstraint"><font color="blue">function</font> equalityConstraint
      <font color="blue">input </font><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A> node1;
      <font color="blue">input </font><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A> node2;
      <font color="blue">output </font>Real residue[0];
   <font color="blue">algorithm </font>
      <font color="red">assert</font>(node1.suspend == node2.suspend<font color="blue"> and </font>
             node1.resume == node2.resume,&quot;Internal error&quot;);
   <font color="blue">end </font>equalityConstraint</textblock>;
<font color="blue">end </font>Node;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Step_in_base<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_StateGraph2.Internal.Interfaces.Step_in_base"></A><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces"
>Modelica_StateGraph2.Internal.Interfaces</A>.Step_in_base</H2>
<B>Input port of a step without icon</B><p>
<P><H3>Contents</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input Boolean</TD><TD>fire</TD><TD>true, if transition fires and step is activated</TD></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A></TD><TD>node</TD><TD>Communicates suspend/resume flags and is used to check the correct connection structure.</TD></TR>
<TR><TD>output Boolean</TD><TD>checkUnaryConnection</TD><TD>Is used to guarantee that only 1:1 connections are possible</TD></TR>
<TR><TD>input Boolean</TD><TD>checkOneDelayedTransitionPerLoop</TD><TD>Is used to check that every connection loop has at least one delayed transition</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">connector</font> Step_in_base <font color="darkgreen">&quot;Input port of a step without icon&quot;</font>
  <font color="blue">input </font>Boolean fire <font color="darkgreen">&quot;true, if transition fires and step is activated&quot;</font>;

  <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A> node <font color="darkgreen">
    &quot;Communicates suspend/resume flags and is used to check the correct connection structure.&quot;</font>;

  <font color="darkgreen">// only for checking properties of the graph</font>
  <font color="blue">output </font>Boolean checkUnaryConnection <font color="darkgreen">
    &quot;Is used to guarantee that only 1:1 connections are possible&quot;</font>;

  <font color="blue">input </font>Boolean checkOneDelayedTransitionPerLoop <font color="darkgreen">
    &quot;Is used to check that every connection loop has at least one delayed transition&quot;</font>;

<font color="blue">end </font>Step_in_base;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Step_out_base<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_StateGraph2.Internal.Interfaces.Step_out_base"></A><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces"
>Modelica_StateGraph2.Internal.Interfaces</A>.Step_out_base</H2>
<B>Output port of a step without icon</B><p>
<P><H3>Contents</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>output Boolean</TD><TD>available</TD><TD>= true, if step is active and firing is possible</TD></TR>
<TR><TD>input Boolean</TD><TD>fire</TD><TD>= true, if transition fires and step is deactivated</TD></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A></TD><TD>node</TD><TD>Communicates suspend/resume flags and is used to check the correct connection structure.</TD></TR>
<TR><TD>output Boolean</TD><TD>checkOneDelayedTransitionPerLoop</TD><TD>Is used to check that every connection loop has at least one delayed transition</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">connector</font> Step_out_base <font color="darkgreen">&quot;Output port of a step without icon&quot;</font>
  <font color="blue">output </font>Boolean available <font color="darkgreen">&quot;= true, if step is active and firing is possible&quot;</font>;
  <font color="blue">input </font>Boolean fire <font color="darkgreen">&quot;= true, if transition fires and step is deactivated&quot;</font>;

  <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A> node <font color="darkgreen">
    &quot;Communicates suspend/resume flags and is used to check the correct connection structure.&quot;</font>;

  <font color="darkgreen">// only for checking properties of the graph</font>
  <font color="blue">output </font>Boolean checkOneDelayedTransitionPerLoop <font color="darkgreen">
    &quot;Is used to check that every connection loop has at least one delayed transition&quot;</font>;
<font color="blue">end </font>Step_out_base;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Step_in<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Step_inI.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Step_in" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_StateGraph2.Internal.Interfaces.Step_in"></A><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces"
>Modelica_StateGraph2.Internal.Interfaces</A>.Step_in</H2>
<B>Input port of a step</B><p>
<IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Step_inD.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Step_in">
<P><H3>Information</H3></P>
Extends from <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Step_in_base"
>Step_in_base</A> (Input port of a step without icon).
<P><H3>Contents</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input Boolean</TD><TD>fire</TD><TD>true, if transition fires and step is activated</TD></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A></TD><TD>node</TD><TD>Communicates suspend/resume flags and is used to check the correct connection structure.</TD></TR>
<TR><TD>output Boolean</TD><TD>checkUnaryConnection</TD><TD>Is used to guarantee that only 1:1 connections are possible</TD></TR>
<TR><TD>input Boolean</TD><TD>checkOneDelayedTransitionPerLoop</TD><TD>Is used to check that every connection loop has at least one delayed transition</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">connector</font> Step_in <font color="darkgreen">&quot;Input port of a step&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Step_in_base"
>Step_in_base</A>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Step_in;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Step_out<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Step_outI.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Step_out" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_StateGraph2.Internal.Interfaces.Step_out"></A><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces"
>Modelica_StateGraph2.Internal.Interfaces</A>.Step_out</H2>
<B>Output port of a step</B><p>
<IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Step_outD.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Step_out">
<P><H3>Information</H3></P>
Extends from <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Step_out_base"
>Step_out_base</A> (Output port of a step without icon).
<P><H3>Contents</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>output Boolean</TD><TD>available</TD><TD>= true, if step is active and firing is possible</TD></TR>
<TR><TD>input Boolean</TD><TD>fire</TD><TD>= true, if transition fires and step is deactivated</TD></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A></TD><TD>node</TD><TD>Communicates suspend/resume flags and is used to check the correct connection structure.</TD></TR>
<TR><TD>output Boolean</TD><TD>checkOneDelayedTransitionPerLoop</TD><TD>Is used to check that every connection loop has at least one delayed transition</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">connector</font> Step_out <font color="darkgreen">&quot;Output port of a step&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Step_out_base"
>Step_out_base</A>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Step_out;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Composite_resume<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Composite_resumeI.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Composite_resume" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_StateGraph2.Internal.Interfaces.Composite_resume"></A><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces"
>Modelica_StateGraph2.Internal.Interfaces</A>.Composite_resume</H2>
<B>Resume port of a composite step</B><p>
<P><H3>Information</H3></P>
Extends from <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Step_in_base"
>Step_in_base</A> (Input port of a step without icon).
<P><H3>Contents</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input Boolean</TD><TD>fire</TD><TD>true, if transition fires and step is activated</TD></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A></TD><TD>node</TD><TD>Communicates suspend/resume flags and is used to check the correct connection structure.</TD></TR>
<TR><TD>output Boolean</TD><TD>checkUnaryConnection</TD><TD>Is used to guarantee that only 1:1 connections are possible</TD></TR>
<TR><TD>input Boolean</TD><TD>checkOneDelayedTransitionPerLoop</TD><TD>Is used to check that every connection loop has at least one delayed transition</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">connector</font> Composite_resume <font color="darkgreen">&quot;Resume port of a composite step&quot;</font>
   <font color="blue">extends </font><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Step_in_base"
>Step_in_base</A>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Composite_resume;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Composite_suspend<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Composite_suspendI.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Composite_suspend" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_StateGraph2.Internal.Interfaces.Composite_suspend"></A><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces"
>Modelica_StateGraph2.Internal.Interfaces</A>.Composite_suspend</H2>
<B>Suspend port of a Composite</B><p>
<P><H3>Information</H3></P>
Extends from <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Step_out_base"
>Step_out_base</A> (Output port of a step without icon).
<P><H3>Contents</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>output Boolean</TD><TD>available</TD><TD>= true, if step is active and firing is possible</TD></TR>
<TR><TD>input Boolean</TD><TD>fire</TD><TD>= true, if transition fires and step is deactivated</TD></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A></TD><TD>node</TD><TD>Communicates suspend/resume flags and is used to check the correct connection structure.</TD></TR>
<TR><TD>output Boolean</TD><TD>checkOneDelayedTransitionPerLoop</TD><TD>Is used to check that every connection loop has at least one delayed transition</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">connector</font> Composite_suspend <font color="darkgreen">&quot;Suspend port of a Composite&quot;</font>
   <font color="blue">extends </font><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Step_out_base"
>Step_out_base</A>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Composite_suspend;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Transition_in_base<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_StateGraph2.Internal.Interfaces.Transition_in_base"></A><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces"
>Modelica_StateGraph2.Internal.Interfaces</A>.Transition_in_base</H2>
<B>Input port of a transition without an icon</B><p>
<P><H3>Contents</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input Boolean</TD><TD>available</TD><TD>= true, if step connected to the transition input is active and firing is possible</TD></TR>
<TR><TD>output Boolean</TD><TD>fire</TD><TD>= true, if transition fires and the step connected to the transition input is deactivated</TD></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A></TD><TD>node</TD><TD>Communicates suspend/resume flags and is used to check the correct connection structure.</TD></TR>
<TR><TD>input Boolean</TD><TD>checkOneDelayedTransitionPerLoop</TD><TD>Is used to check that every connection loop has at least one delayed transition</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">connector</font> Transition_in_base <font color="darkgreen">
  &quot;Input port of a transition without an icon&quot;</font>
  <font color="blue">input </font>Boolean available <font color="darkgreen">
    &quot;= true, if step connected to the transition input is active and firing is possible&quot;</font>;

  <font color="blue">output </font>Boolean fire <font color="darkgreen">
    &quot;= true, if transition fires and the step connected to the transition input is deactivated&quot;</font>;

  <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A> node <font color="darkgreen">
    &quot;Communicates suspend/resume flags and is used to check the correct connection structure.&quot;</font>;

  <font color="darkgreen">// only for checking properties of the graph</font>
  <font color="blue">input </font>Boolean checkOneDelayedTransitionPerLoop <font color="darkgreen">
    &quot;Is used to check that every connection loop has at least one delayed transition&quot;</font>;
<font color="blue">end </font>Transition_in_base;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Transition_out_base<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_StateGraph2.Internal.Interfaces.Transition_out_base"></A><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces"
>Modelica_StateGraph2.Internal.Interfaces</A>.Transition_out_base</H2>
<B>Output port of a transition without icon</B><p>
<P><H3>Contents</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>output Boolean</TD><TD>fire</TD><TD>true, if transition fires and step connected to the transition output becomes active</TD></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A></TD><TD>node</TD><TD>Communicates suspend/resume flags and is used to check the correct connection structure.</TD></TR>
<TR><TD>input Boolean</TD><TD>checkUnaryConnection</TD><TD>Is used to guarantee that only 1:1 connections are possible</TD></TR>
<TR><TD>output Boolean</TD><TD>checkOneDelayedTransitionPerLoop</TD><TD>Is used to check that every connection loop has at least one delayed transition</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">connector</font> Transition_out_base <font color="darkgreen">
  &quot;Output port of a transition without icon&quot;</font>
  <font color="blue">output </font>Boolean fire <font color="darkgreen">
    &quot;true, if transition fires and step connected to the transition output becomes active&quot;</font>;

  <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A> node <font color="darkgreen">
    &quot;Communicates suspend/resume flags and is used to check the correct connection structure.&quot;</font>;

  <font color="darkgreen">// only for checking properties of the graph</font>
  <font color="blue">input </font>Boolean checkUnaryConnection <font color="darkgreen">
    &quot;Is used to guarantee that only 1:1 connections are possible&quot;</font>;

  <font color="blue">output </font>Boolean checkOneDelayedTransitionPerLoop <font color="darkgreen">
    &quot;Is used to check that every connection loop has at least one delayed transition&quot;</font>;
<font color="blue">end </font>Transition_out_base;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Transition_in<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Transition_inI.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Transition_in" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_StateGraph2.Internal.Interfaces.Transition_in"></A><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces"
>Modelica_StateGraph2.Internal.Interfaces</A>.Transition_in</H2>
<B>Input port of a transition</B><p>
<IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Transition_inD.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Transition_in">
<P><H3>Information</H3></P>
<PRE></pre>

<pre></PRE><P>
Extends from <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Transition_in_base"
>Transition_in_base</A> (Input port of a transition without an icon).
<P><H3>Contents</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input Boolean</TD><TD>available</TD><TD>= true, if step connected to the transition input is active and firing is possible</TD></TR>
<TR><TD>output Boolean</TD><TD>fire</TD><TD>= true, if transition fires and the step connected to the transition input is deactivated</TD></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A></TD><TD>node</TD><TD>Communicates suspend/resume flags and is used to check the correct connection structure.</TD></TR>
<TR><TD>input Boolean</TD><TD>checkOneDelayedTransitionPerLoop</TD><TD>Is used to check that every connection loop has at least one delayed transition</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">connector</font> Transition_in <font color="darkgreen">&quot;Input port of a transition&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Transition_in_base"
>Transition_in_base</A>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Transition_in;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Transition_out<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Transition_outI.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Transition_out" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_StateGraph2.Internal.Interfaces.Transition_out"></A><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces"
>Modelica_StateGraph2.Internal.Interfaces</A>.Transition_out</H2>
<B>Output port of a transition</B><p>
<IMG SRC="Modelica_StateGraph2.Internal.Interfaces.Transition_outD.png" ALT="Modelica_StateGraph2.Internal.Interfaces.Transition_out">
<P><H3>Information</H3></P>
<PRE></pre>

<pre></PRE><P>
Extends from <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Transition_out_base"
>Transition_out_base</A> (Output port of a transition without icon).
<P><H3>Contents</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>output Boolean</TD><TD>fire</TD><TD>true, if transition fires and step connected to the transition output becomes active</TD></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A></TD><TD>node</TD><TD>Communicates suspend/resume flags and is used to check the correct connection structure.</TD></TR>
<TR><TD>input Boolean</TD><TD>checkUnaryConnection</TD><TD>Is used to guarantee that only 1:1 connections are possible</TD></TR>
<TR><TD>output Boolean</TD><TD>checkOneDelayedTransitionPerLoop</TD><TD>Is used to check that every connection loop has at least one delayed transition</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">connector</font> Transition_out <font color="darkgreen">&quot;Output port of a transition&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Transition_out_base"
>Transition_out_base</A>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Transition_out;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE EntryPort<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.EntryPortI.png" ALT="Modelica_StateGraph2.Internal.Interfaces.EntryPort" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_StateGraph2.Internal.Interfaces.EntryPort"></A><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces"
>Modelica_StateGraph2.Internal.Interfaces</A>.EntryPort</H2>
<B>Entry port of a composite, same as a transition outPort</B><p>
<IMG SRC="Modelica_StateGraph2.Internal.Interfaces.EntryPortD.png" ALT="Modelica_StateGraph2.Internal.Interfaces.EntryPort">
<P><H3>Information</H3></P>
<PRE></pre>

  <pre></PRE><P>
Extends from <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Transition_out_base"
>Transition_out_base</A> (Output port of a transition without icon).
<P><H3>Contents</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>output Boolean</TD><TD>fire</TD><TD>true, if transition fires and step connected to the transition output becomes active</TD></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A></TD><TD>node</TD><TD>Communicates suspend/resume flags and is used to check the correct connection structure.</TD></TR>
<TR><TD>input Boolean</TD><TD>checkUnaryConnection</TD><TD>Is used to guarantee that only 1:1 connections are possible</TD></TR>
<TR><TD>output Boolean</TD><TD>checkOneDelayedTransitionPerLoop</TD><TD>Is used to check that every connection loop has at least one delayed transition</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">connector</font> EntryPort <font color="darkgreen">
  &quot;Entry port of a composite, same as a transition outPort&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Transition_out_base"
>Transition_out_base</A>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>EntryPort;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ExitPort<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_StateGraph2.Internal.Interfaces.ExitPortI.png" ALT="Modelica_StateGraph2.Internal.Interfaces.ExitPort" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_StateGraph2.Internal.Interfaces.ExitPort"></A><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces"
>Modelica_StateGraph2.Internal.Interfaces</A>.ExitPort</H2>
<B>Exit connector of a composite, same as transition inPort</B><p>
<IMG SRC="Modelica_StateGraph2.Internal.Interfaces.ExitPortD.png" ALT="Modelica_StateGraph2.Internal.Interfaces.ExitPort">
<P><H3>Information</H3></P>
<PRE></pre>

  <pre></PRE><P>
Extends from <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Transition_in_base"
>Transition_in_base</A> (Input port of a transition without an icon).
<P><H3>Contents</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input Boolean</TD><TD>available</TD><TD>= true, if step connected to the transition input is active and firing is possible</TD></TR>
<TR><TD>output Boolean</TD><TD>fire</TD><TD>= true, if transition fires and the step connected to the transition input is deactivated</TD></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A></TD><TD>node</TD><TD>Communicates suspend/resume flags and is used to check the correct connection structure.</TD></TR>
<TR><TD>input Boolean</TD><TD>checkOneDelayedTransitionPerLoop</TD><TD>Is used to check that every connection loop has at least one delayed transition</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">connector</font> ExitPort <font color="darkgreen">
  &quot;Exit connector of a composite, same as transition inPort&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Transition_in_base"
>Transition_in_base</A>;

<textblock type="annotcomp" expanded="false">
<font color="blue">end </font>ExitPort;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PartialParallelBase<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_StateGraph2.Internal.Interfaces.PartialParallelBase"></A><A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces"
>Modelica_StateGraph2.Internal.Interfaces</A>.PartialParallelBase</H2>
<B>Base class of a parallel component (including a composite step as special case)</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Parallel splitting of execution path including special cases so that step is:
autonomous, composed, parallel unsynchronized, parallel with synchronized outputs.
</p>
<pre></PRE><P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>initialStep</TD><TD>false</TD><TD>=true, if initial step (start state machine at entry ports of Parallel)</TD></TR>
<TR><TD>Boolean</TD><TD>use_inPort</TD><TD>true</TD><TD>=true, if inPort enabled</TD></TR>
<TR><TD>Boolean</TD><TD>use_outPort</TD><TD>false</TD><TD>=true, if outPort enabled</TD></TR>
<TR><TD>Boolean</TD><TD>use_suspend</TD><TD>false</TD><TD>=true, if suspend and resume ports enabled</TD></TR>
<TR><TD>Boolean</TD><TD>use_activePort</TD><TD>false</TD><TD>=true, if activePort enabled</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">partial </font><font color="blue">block</font> PartialParallelBase <font color="darkgreen">
  &quot;Base class of a parallel component (including a composite step as special case)&quot;</font>

  <font color="blue">parameter </font>Integer nIn(min=0)=0 <font color="darkgreen">&quot;Number of input connections&quot;</font>;
  <font color="blue">parameter </font>Integer nOut(min=0)=0 <font color="darkgreen">&quot;Number of output connections&quot;</font>;
  <font color="blue">parameter </font>Integer nSuspend(min=0)=0 <font color="darkgreen">&quot;Number of suspend ports&quot;</font>;
  <font color="blue">parameter </font>Integer nResume(min=0)=0 <font color="darkgreen">&quot;Number of resume ports&quot;</font>;
  <font color="blue">parameter </font>Integer nEntry(min=0)=0 <font color="darkgreen">&quot;Number of entry branches&quot;</font>;
  <font color="blue">parameter </font>Integer nExit(min=0)=0 <font color="darkgreen">&quot;Number of exit branches&quot;</font>;

  <font color="blue">parameter </font>Boolean initialStep=false <font color="darkgreen">
    &quot;=true, if initial step (start state machine at entry ports of Parallel)&quot;</font>;

  <font color="blue">parameter </font>Boolean use_inPort = true <font color="darkgreen">&quot;=true, if inPort enabled&quot;</font>;
  <font color="blue">parameter </font>Boolean use_outPort = false <font color="darkgreen">&quot;=true, if outPort enabled&quot;</font>;
  <font color="blue">parameter </font>Boolean use_suspend = false <font color="darkgreen">
    &quot;=true, if suspend and resume ports enabled&quot;</font>;
  <font color="blue">parameter </font>Boolean use_activePort = false <font color="darkgreen">&quot;=true, if activePort enabled&quot;</font>;
  <font color="blue">output </font>Boolean active(<font color="blue">final </font>start=initialStep, fixed=true) <font color="darkgreen">
    &quot;= true if composite/parallel step is active, otherwise it is not active&quot;</font>;
<font color="blue">protected </font>
  <font color="blue">parameter </font>Integer nExit2 = <font color="blue">if </font>use_outPort<font color="blue"> then </font>nExit<font color="blue"> else </font>0;
  <font color="blue">parameter </font>Integer nMinBranches =<font color="red"> min</font>(nEntry, nExit);
  <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Node"
>Node</A> node <font color="darkgreen">
    &quot;Node of Parallel component to handle rootIDs from inPort to outPort transitions&quot;</font>;

  Boolean newActive(start=initialStep, fixed=true) <font color="darkgreen">
    &quot;Value of active in the next iteration&quot;</font>;
  Boolean finished(start=<font color="blue">not </font>initialStep, fixed=true);

  Boolean inport_fire(start=false, fixed=true) <font color="darkgreen">&quot;One of the inports fires&quot;</font>;
  Boolean outport_fire <font color="darkgreen">&quot;One of the outports fires&quot;</font>;
  Boolean suspend_fire(start=false, fixed=true) <font color="darkgreen">
    &quot;One of the suspend ports fires&quot;</font>;
  Boolean resume_fire <font color="darkgreen">&quot;One of the resume ports fires&quot;</font>;
  Boolean entry_fire(start=false, fixed=true) <font color="darkgreen">&quot;One of the entry ports fires&quot;</font>;
  Boolean startTransition(start=true, fixed=true) <font color="darkgreen">
    &quot;Initialize entry port for autonomous step&quot;</font>;
  Boolean checkOneDelayedTransitionPerLoopIn;
  Integer firstActive(start=0, fixed=true) <font color="darkgreen">
    &quot;= 1, if step becomes the first time active, for future activations, its value is 2. Is used to correctly initialize if nIn=0 and nResume&gt;0&quot;</font>;
  Integer entryIndices[nEntry] <font color="darkgreen">&quot;exit[i] belongs to entry[rootIndices[i]]&quot;</font>;
  Boolean entry_restart[nEntry] <font color="darkgreen">
    &quot;elements corresponding to the entry array deciding whether or not they should be restarted upon resume when finished (information is collected from &quot;</font>;

  <font color="darkgreen">// Local connectors of conditional connectors</font>
  <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Step_in"
>Step_in</A> local_inPort[nIn];
  <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Step_out"
>Step_out</A> local_outPort[nOut];
  <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Composite_suspend"
>Composite_suspend</A> local_suspend[nSuspend];
  <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.Composite_resume"
>Composite_resume</A> local_resume[nResume];
  <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.EntryPort"
>EntryPort</A> local_entry[nEntry];
  <A HREF="Modelica_StateGraph2_Internal_Interfaces.html#Modelica_StateGraph2.Internal.Interfaces.ExitPort"
>ExitPort</A> local_exit[nExit2];

   Boolean oldActive(start=initialStep, fixed=true) <font color="darkgreen">
    &quot;Value of active when CompositeStep was aborted&quot;</font>;
<font color="blue">equation </font>
  <font color="blue">if </font>use_outPort<font color="blue"> then</font>
    <font color="red"> assert</font>(nEntry &gt;= nExit,
            &quot;The number of entry branches is not greater or equal to the number of exit branches of a parallel step.&quot;);
    <font color="red"> assert</font>(nExit &gt; 0, &quot;Since outPort is enabled, there must be at least one connection to the exit port&quot;);
  <font color="blue">end if</font>;

  <font color="red">assert</font>(nIn==0<font color="blue"> and </font>nResume==0<font color="blue"> and </font>initialStep<font color="blue"> or </font>nIn &gt; 0<font color="blue"> or </font>nResume &gt; 0,
        &quot;Parallel has neither an inPort, a resume port nor is set to be an initial step.\n&quot; +
        &quot;One of these must be true in order to initialize correctly&quot;);

  <font color="blue">when </font>{outport_fire,<font color="red"> pre</font>(entry_fire)}<font color="blue"> then</font>
     finished = outport_fire;
  <font color="blue">end when</font>;

  <font color="blue">when </font>node.suspend<font color="blue"> then</font>
    oldActive = active;
  <font color="blue">end when</font>;

  <font color="darkgreen">// Set active state</font>
   <font color="blue">if </font>initialStep<font color="blue"> then</font>
     startTransition =<font color="red"> pre</font>(startTransition)<font color="blue"> and </font><font color="blue">not </font><font color="red">pre</font>(inport_fire);
     inport_fire     =<font color="red"> pre</font>(startTransition)<font color="blue"> or </font><font color="red">Modelica_StateGraph2.Blocks.BooleanFunctions.anyTrue</font>(
                                                                        local_inPort.fire);
  <font color="blue">else</font>
     startTransition = false;
     inport_fire     =<font color="red"> Modelica_StateGraph2.Blocks.BooleanFunctions.anyTrue</font>(
                                                local_inPort.fire);
  <font color="blue">end if</font>;

  outport_fire =<font color="red"> Modelica_StateGraph2.Blocks.BooleanFunctions.anyTrue</font>(
                                          local_outPort.fire);
  suspend_fire =<font color="red"> Modelica_StateGraph2.Blocks.BooleanFunctions.anyTrue</font>(
                                          local_inPort.node.suspend)<font color="blue"> or </font>
                <font color="red">Modelica_StateGraph2.Blocks.BooleanFunctions.anyTrue</font>(
                                          local_resume.node.suspend)<font color="blue"> or </font>
                 <font color="red">Modelica_StateGraph2.Blocks.BooleanFunctions.anyTrue</font>(
                                          local_suspend.fire);

  resume_fire  =<font color="red"> Modelica_StateGraph2.Blocks.BooleanFunctions.anyTrue</font>(
                                          local_inPort.node.resume)<font color="blue"> or </font>
                 <font color="red">Modelica_StateGraph2.Blocks.BooleanFunctions.anyTrue</font>(
                                          local_resume.node.resume)<font color="blue"> or </font>
                 <font color="red">Modelica_StateGraph2.Blocks.BooleanFunctions.anyTrue</font>(
                                          local_resume.fire);

  entry_fire   =<font color="red"> Modelica_StateGraph2.Blocks.BooleanFunctions.anyTrue</font>(
                                          local_entry.fire);
  active       =<font color="red"> pre</font>(newActive);
  newActive    = <font color="blue">if </font><font color="red">Modelica_StateGraph2.Blocks.BooleanFunctions.anyTrue</font>(
                                             local_inPort.node.resume)<font color="blue"> then </font>oldActive<font color="blue"> else </font>inport_fire<font color="blue"> or </font><font color="red">Modelica_StateGraph2.Blocks.BooleanFunctions.anyTrue</font>(
                                                                                              local_resume.fire)<font color="blue"> or </font>active<font color="blue"> and </font><font color="blue">not </font>outport_fire<font color="blue"> and </font><font color="blue">not </font>suspend_fire;

  <font color="blue">for </font>i<font color="blue"> in </font>1:nMinBranches<font color="blue"> loop</font>
    entry_restart[entryIndices[i]] = true;
  <font color="blue">end for</font>;
  <font color="blue">for </font>i<font color="blue"> in </font>nMinBranches+1:nEntry<font color="blue"> loop</font>
    entry_restart[entryIndices[i]] = <font color="blue">if </font>nExit == 0<font color="blue"> then </font>true<font color="blue"> else </font>false;
  <font color="blue">end for</font>;

  <font color="darkgreen">// Propagate flags between the connectors</font>
<font color="darkgreen">// if initialStep or nIn  == 0 and nResume &gt; 0 then</font>
   <font color="blue">if </font>initialStep<font color="blue"> or </font>nResume &gt; 0<font color="blue"> then</font>
    <font color="darkgreen"> //firstActive = if active and pre(firstActive) &lt;= 1 then pre(firstActive) + 1 else</font>
        firstActive = <font color="blue">if </font>(active<font color="blue"> and </font><font color="blue">not </font>suspend_fire)<font color="blue"> and </font><font color="red">pre</font>(firstActive) &lt;= 1<font color="blue"> then </font><font color="red">pre</font>(firstActive) + 1<font color="blue"> else </font>
                   <font color="blue">if </font>resume_fire<font color="blue"> and </font>finished<font color="blue"> then </font>0<font color="blue"> else </font><font color="red">pre</font>(firstActive);
     <font color="blue">if </font>firstActive == 1<font color="blue"> then</font>
<font color="darkgreen">//      local_entry.fire = fill(true, nEntry);</font>
        local_entry.fire = entry_restart;
     <font color="blue">else</font>
       local_entry.fire =<font color="red"> fill</font>(inport_fire,  nEntry);
     <font color="blue">end if</font>;
  <font color="blue">else</font>
     firstActive = 0;
     local_entry.fire =<font color="red"> fill</font>(inport_fire, nEntry);
  <font color="blue">end if</font>;
  local_exit.fire  =<font color="red"> fill</font>(outport_fire, nExit2);

  <font color="blue">for </font>i<font color="blue"> in </font>1:nOut<font color="blue"> loop</font>
     local_outPort[i].available = <font color="blue">if </font>i == 1<font color="blue"> then </font>
                                    active<font color="blue"> and </font>
                                    <font color="red">Modelica_StateGraph2.Blocks.BooleanFunctions.allTrue</font>(
                                                             local_exit.available)<font color="blue"> else </font>
                                    local_outPort[i-1].available<font color="blue"> and </font><font color="blue">not </font>local_outPort[i-1].fire;
  <font color="blue">end for</font>;

  <font color="blue">for </font>i<font color="blue"> in </font>1:nSuspend<font color="blue"> loop</font>
     local_suspend[i].available = <font color="blue">if </font>i == 1<font color="blue"> then </font>active<font color="blue"> and </font><font color="blue">not </font><font color="red">pre</font>(suspend_fire)<font color="blue"> else </font>
                                     local_suspend[i-1].available<font color="blue"> and </font><font color="blue">not </font>
                                     local_suspend[i-1].fire;
  <font color="blue">end for</font>;

  <font color="darkgreen">// Check unary connections</font>
  local_inPort.checkUnaryConnection =<font color="red"> fill</font>(true, nIn);
  local_resume.checkUnaryConnection =<font color="red"> fill</font>(true, nResume);

  <font color="darkgreen">// Check Modelica_StateGraph2 structure</font>
  <font color="red">Connections.uniqueRoot</font>(local_entry.node, &quot;
The StateGraph has a wrong connection structure. Reasons:
(1) The StateGraph is initialized at two different locations (initial steps or entry ports).
(2) A transition is made wrongly out of a Parallel component.
(3) A transition is made between two branches of a Parallel component.
All these cases are not allowed.
&quot;);

   entryIndices =<font color="red"> Connections.uniqueRootIndices</font>(local_entry.node, local_exit.node, &quot;
 The connection structure in a Parallel component is not correct:
 There must be exactly one unique path from every exit port to every entry port.
 This is not the case here.
 &quot;);

  <font color="blue">for </font>i<font color="blue"> in </font>1:nEntry<font color="blue"> loop</font>
     local_entry[i].node.suspend = active<font color="blue"> and </font>suspend_fire<font color="blue"> or </font><font color="blue">not </font>active<font color="blue"> and </font><font color="red">pre</font>(active);
<font color="darkgreen">//   local_entry[i].node.suspend = suspend_fire;</font>
     local_entry[i].node.resume  = resume_fire<font color="blue"> and </font><font color="blue">not </font>entry_fire;
<font color="darkgreen">//   local_entry[i].node.resume  = resume_fire;</font>
  <font color="blue">end for</font>;

  <font color="blue">if </font>initialStep<font color="blue"> then</font>
    <font color="red">Connections.uniqueRoot</font>(node, &quot;uniqueRoot Error in Parallel&quot;);
    node.resume = false;
    node.suspend = false;
  <font color="blue">else</font>
    <font color="darkgreen"> // In order that check works (nIn=0), provide the missing equations</font>
     <font color="blue">if </font>nIn==0<font color="blue"> and </font>nResume==0<font color="blue"> then</font>
        node.resume  = false;
        node.suspend = false;
     <font color="blue">end if</font>;
  <font color="blue">end if</font>;

  <font color="blue">for </font>i<font color="blue"> in </font>1:nIn<font color="blue"> loop</font>
    <font color="red"> Connections.branch</font>(local_inPort[i].node, node);
     local_inPort[i].node = node;
  <font color="blue">end for</font>;

  <font color="blue">for </font>i<font color="blue"> in </font>1:nResume<font color="blue"> loop</font>
    <font color="red"> Connections.branch</font>(local_resume[i].node, node);
     local_resume[i].node = node;
  <font color="blue">end for</font>;

  <font color="blue">for </font>i<font color="blue"> in </font>1:nOut<font color="blue"> loop</font>
    <font color="red"> Connections.branch</font>(node, local_outPort[i].node);
     local_outPort[i].node = node;
  <font color="blue">end for</font>;

  <font color="blue">for </font>i<font color="blue"> in </font>1:nSuspend<font color="blue"> loop</font>
    <font color="red"> Connections.branch</font>(node, local_suspend[i].node);
     local_suspend[i].node = node;
  <font color="blue">end for</font>;

  <font color="darkgreen">// Check loops of Modelica_StateGraph2</font>
  <font color="blue">if </font>initialStep<font color="blue"> then</font>
    checkOneDelayedTransitionPerLoopIn =
      <font color="red">Utilities.initializeLoopCheck</font>();
  <font color="blue">else</font>
    checkOneDelayedTransitionPerLoopIn =
      <font color="red">Utilities.propagateLoopCheck</font>(local_inPort.checkOneDelayedTransitionPerLoop)<font color="blue">
       and </font><font color="red">Utilities.propagateLoopCheck</font>(local_resume.checkOneDelayedTransitionPerLoop);
  <font color="blue">end if</font>;

  local_suspend.checkOneDelayedTransitionPerLoop =<font color="red"> fill</font>(checkOneDelayedTransitionPerLoopIn, nSuspend);

  <font color="blue">if </font>nOut == 0<font color="blue"> or </font>nEntry == 0<font color="blue"> then</font>
    <font color="darkgreen"> // no outPort connector or no branches</font>
     local_entry.checkOneDelayedTransitionPerLoop   =<font color="red"> fill</font>(checkOneDelayedTransitionPerLoopIn, nEntry);
     local_outPort.checkOneDelayedTransitionPerLoop =<font color="red"> fill</font>(true, nOut);
  <font color="blue">else</font>
<font color="darkgreen">//   local_entry[1].checkOneDelayedTransitionPerLoop = checkOneDelayedTransitionPerLoopIn;</font>
     local_entry[entryIndices[1]].checkOneDelayedTransitionPerLoop = checkOneDelayedTransitionPerLoopIn;

    <font color="darkgreen"> // During initialization it is checked whether entry and exit port connections</font>
    <font color="darkgreen"> // are fine. The for-statements are made in such a form, that no translation</font>
    <font color="darkgreen"> // error occurs, if this case is present. Instead, during initialization</font>
    <font color="darkgreen"> // a meaningful error message is printed</font>
     <font color="blue">for </font>i<font color="blue"> in </font>2:nMinBranches<font color="blue"> loop</font>
        local_entry[entryIndices[i]].checkOneDelayedTransitionPerLoop = local_exit[i-1].checkOneDelayedTransitionPerLoop;
<font color="darkgreen">//      local_entry[i].checkOneDelayedTransitionPerLoop = local_exit[i-1].checkOneDelayedTransitionPerLoop;</font>
     <font color="blue">end for</font>;
     <font color="blue">for </font>i<font color="blue"> in </font>nMinBranches+1:nEntry<font color="blue"> loop</font>
<font color="darkgreen">//      local_entry[i].checkOneDelayedTransitionPerLoop = true;</font>
        local_entry[entryIndices[i]].checkOneDelayedTransitionPerLoop = true;
     <font color="blue">end for</font>;
     local_outPort.checkOneDelayedTransitionPerLoop =
          <font color="red">fill</font>(local_exit[nMinBranches].checkOneDelayedTransitionPerLoop, nOut);
  <font color="blue">end if</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>PartialParallelBase;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 17:27:07 2010.
</address></BODY>
</HTML>
