<HTML>
<HEAD>
<TITLE>Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities</TITLE>
<META name="HTML-Generator" content="Dymola">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Utilities<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities"></A><A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch"
>Modelica_StateGraph2.Examples.Applications.HarelsWristWatch</A>.Utilities</H2>
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.SignalBusS.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.SignalBus" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.SignalBus"
>SignalBus</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchDisplayS.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchDisplay" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchDisplay"
>WatchDisplay</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.TimeS.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.Time" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.Time"
>Time</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.DisplayDecoderS.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.DisplayDecoder" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.DisplayDecoder"
>DisplayDecoder</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.AlarmTriggerS.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.AlarmTrigger" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.AlarmTrigger"
>AlarmTrigger</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchControllerS.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchController" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchController"
>WatchController</A>
</TD><TD>&nbsp;</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SignalBus<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.SignalBusI.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.SignalBus" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.SignalBus"></A><A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities"
>Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities</A>.SignalBus</H2>
<IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.SignalBusD.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.SignalBus">
<P><H3>Information</H3></P>
Extends from <A HREF="../../Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.SignalBus"
>Modelica.Icons.SignalBus</A> (Icon for signal bus).
<P><H3>Contents</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>a</TD><TD>&nbsp;</TD></TR>
<TR><TD>Boolean</TD><TD>b</TD><TD>&nbsp;</TD></TR>
<TR><TD>Boolean</TD><TD>c</TD><TD>&nbsp;</TD></TR>
<TR><TD>Boolean</TD><TD>d</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">expandable connector</font> SignalBus
  <font color="blue">extends </font><A HREF="../../Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.SignalBus"
>Modelica.Icons.SignalBus</A>;
  Boolean a;
  Boolean b;
  Boolean c;
  Boolean d;
<font color="blue">end </font>SignalBus;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE WatchDisplay<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchDisplayI.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchDisplay" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchDisplay"></A><A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities"
>Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities</A>.WatchDisplay</H2>
<IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchDisplayD.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchDisplay">
<P><H3>Information</H3></P>
<PRE></pre>
<p>Displays four large digits, one small digit and one two letter text according to signals provided through the IntegerInputs. The top IntegerInput defines the level of illumination of the display.</p>
<p><img src="../Images/StateGraph/Examples/WatchDisplay.png"/></p>
<p>Signal inputs are:</p>
<p><ul>
<li>Large digits, input at the bottom. Range: 0-9</li>
<li>Small digit, input at the right bottom. Range: 0-99</li>
<li>Textual Input, input at top right.  Range: 0-11. Signals are decoded as: 0 = &QUOT;&QUOT;, 1 = &QUOT;Mo&QUOT;, 2 = &QUOT;Tu&QUOT;, 3 = &QUOT;We&QUOT;, 4 = &QUOT;Th&QUOT;, 5 = &QUOT;Fr&QUOT;, 6 = &QUOT;Sa&QUOT;, 7 = &QUOT;Su&QUOT;, 8 = &QUOT;AM&QUOT;, 9 =&QUOT; PM&QUOT;, 10=&QUOT;Ch&QUOT;, 11 = &QUOT;SW&QUOT;.</li>
<li>Illumination level at the top. Range 0-2. Signals are decoded as: 0 - dark, 1 - normal, 2 - bright.</li>
</ul></p>
<pre></PRE><P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>precision</TD><TD>0</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>large_digit1</TD><TD>&nbsp;</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>small_digit</TD><TD>&nbsp;</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>text_digit</TD><TD>1 = Mo, 2 = Tu, 3 = We, 4 = Th, 5 = Fr, 6 = Sa, 7 = Su, 8 = AM, 9 = PM, 10 = Ch, 11 = SW</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>illumination</TD><TD> 0 = dark {0,95,191}, 1 = standard {127,191,255}, 2 = bright {159,223,223}</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>large_digit2</TD><TD>&nbsp;</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>large_digit3</TD><TD>&nbsp;</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>large_digit4</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> WatchDisplay
  <font color="blue">parameter </font>Integer precision(min=0) = 0;

<textblock type="annotcomp" expanded="false">  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> large_digit1;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> small_digit;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> text_digit <font color="darkgreen">
    &quot;1 = Mo, 2 = Tu, 3 = We, 4 = Th, 5 = Fr, 6 = Sa, 7 = Su, 8 = AM, 9 = PM, 10 = Ch, 11 = SW&quot;</font>;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> illumination <font color="darkgreen">
    &quot; 0 = dark {0,95,191}, 1 = standard {127,191,255}, 2 = bright {159,223,223}&quot;</font>;</textblock>

  Integer dispColour[3] = <font color="blue">if </font><font color="red">mod</font>(illumination,3) == 1<font color="blue"> then </font>{127,191,255}<font color="blue"> else </font><font color="blue">if </font><font color="red">mod</font>(illumination,3) == 2<font color="blue"> then </font>{159,223,223}<font color="blue"> else </font>{0,95,191};
<textblock type="annotcomp" expanded="false">  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> large_digit2;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> large_digit3;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> large_digit4;</textblock>
<font color="blue">equation </font>

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>WatchDisplay;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Time<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.TimeI.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.Time" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.Time"></A><A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities"
>Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities</A>.Time</H2>
<IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.TimeD.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.Time">
<P><H3>Information</H3></P>
<PRE></pre>
<p>Outputs a time integer signal depending on what mode the watch is currently in. As all four time signals, current time, time setting, alarm1 setting and alarm2 setting should be decoded in the exact same fashion, the output of Time is handled the same in DisplayDecoder. This model also contains the actual clock that makes one tick every second. when a user sets a new time, the discrete state in TriggeredAdd will be reset and the output will re-set to that value and continue ticking.</p>
<pre></PRE><P>

<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.SignalBus"
>SignalBus</A></TD><TD>signalBus</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>IntegerOutput</A></TD><TD>y</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Time

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.SignalBus"
>SignalBus</A> signalBus;
  <A HREF="Modelica_StateGraph2_Blocks_MathInteger.html#Modelica_StateGraph2.Blocks.MathInteger.TriggeredAdd"
>Modelica_StateGraph2.Blocks.MathInteger.TriggeredAdd</A> clock(
      use_reset=true,
    use_set=true);
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.IntegerConstant"
>Modelica.Blocks.Sources.IntegerConstant</A> time_scale(k=1);
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.SampleTrigger"
>Modelica.Blocks.Sources.SampleTrigger</A> time_update_frequency(period=1);
  <A HREF="Modelica_StateGraph2_Blocks_MathInteger.html#Modelica_StateGraph2.Blocks.MathInteger.MultiSwitch"
>Modelica_StateGraph2.Blocks.MathInteger.MultiSwitch</A> time_to_display(  nu=4,
    use_pre_as_default=false, expr={clock_time,update_time,alarm1_time,
        alarm2_time});
<font color="blue">protected </font>
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> update_time;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> alarm1_time;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> alarm2_time;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> clock_time;
<font color="blue">protected </font>
  <A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.SignalBus"
>SignalBus</A> bus_node;
<font color="blue">public </font>
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> y;
  <A HREF="Modelica_StateGraph2_Blocks_MathBoolean.html#Modelica_StateGraph2.Blocks.MathBoolean.And"
>Modelica_StateGraph2.Blocks.MathBoolean.And</A> and1(    nu=2);
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Logical.html#Modelica.Blocks.Logical.Pre"
>Modelica.Blocks.Logical.Pre</A> pre1;
  <A HREF="Modelica_StateGraph2_Blocks_MathBoolean.html#Modelica_StateGraph2.Blocks.MathBoolean.Or"
>Modelica_StateGraph2.Blocks.MathBoolean.Or</A> or1(    nu=2);
<font color="blue">public </font>
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.BooleanExpression"
>Modelica.Blocks.Sources.BooleanExpression</A> T_hits_T1(y=<font color="red">abs</font>(<font color="red">mod</font>(clock_time, 3600
        *24) - alarm1_time) == 0);
<font color="blue">public </font>
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.BooleanExpression"
>Modelica.Blocks.Sources.BooleanExpression</A> T_hits_T2(y=<font color="red">abs</font>(<font color="red">mod</font>(clock_time,
        3600*24) - alarm2_time) == 0);
<font color="blue">public </font>
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.BooleanExpression"
>Modelica.Blocks.Sources.BooleanExpression</A> T_IS_WHOLE_HOUR(y=<font color="red">mod</font>(
      clock_time, 3600) == 0);</textblock>
<font color="blue">equation </font>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(clock.u, time_scale.y);
  <font color="red">connect</font>(time_update_frequency.y, clock.trigger);
  <font color="red">connect</font>(update_time, signalBus.update_time);
  <font color="red">connect</font>(clock_time, clock.y);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(alarm1_time, signalBus.T1);
  <font color="red">connect</font>(alarm2_time, signalBus.T2);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(time_to_display.u[1], bus_node.time_active);
  <font color="red">connect</font>(time_to_display.u[2], bus_node.show_time);
  <font color="red">connect</font>(time_to_display.u[3], bus_node.in_alarm1);
  <font color="red">connect</font>(time_to_display.u[4], bus_node.in_alarm2);
  <font color="red">connect</font>(bus_node, signalBus);
  <font color="red">connect</font>(time_to_display.y, y);
  <font color="red">connect</font>(update_time, clock.set);
  <font color="red">connect</font>(pre1.u, signalBus.update_active);
  <font color="red">connect</font>(pre1.y, and1.u[1]);
  <font color="red">connect</font>(and1.u[2], signalBus.time_active);
  <font color="red">connect</font>(or1.y, clock.reset);
  <font color="red">connect</font>(and1.y, or1.u[1]);
  <font color="red">connect</font>(or1.u[2], signalBus.dead_active);
  <font color="red">connect</font>(clock_time, bus_node.main_time);
  <font color="red">connect</font>(T_hits_T1.y, bus_node.T_hits_T1);
  <font color="red">connect</font>(T_hits_T2.y, bus_node.T_hits_T2);
<font color="red">connect</font>(T_IS_WHOLE_HOUR.y, bus_node.T_is_whole_hour);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Time;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE DisplayDecoder<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.DisplayDecoderI.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.DisplayDecoder" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.DisplayDecoder"></A><A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities"
>Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities</A>.DisplayDecoder</H2>
<IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.DisplayDecoderD.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.DisplayDecoder">
<P><H3>Information</H3></P>
<PRE></pre>
<p>Decodes a number of integer signals (input at the bottom) into six digits to be displayed on a LED display according to definition in the WatchDisplay. Depending on the selected mode, the signals are masked in order to show the chosen entity correctly.</p>
<pre></PRE><P>

<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>time_signal</TD><TD>Raw input signal</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>IntegerOutput</A></TD><TD>large_digit_1</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>IntegerOutput</A></TD><TD>large_digit_2</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>IntegerOutput</A></TD><TD>large_digit_3</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>IntegerOutput</A></TD><TD>large_digit_4</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>IntegerOutput</A></TD><TD>small_digit</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>IntegerOutput</A></TD><TD>text_digit</TD><TD>&nbsp;</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>time_mode</TD><TD>Raw input signal</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>date_mode</TD><TD>Raw input signal</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>year_mode</TD><TD>Raw input signal</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>stopwatch_mode</TD><TD>Raw input signal</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>day_signal</TD><TD>Raw input signal</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>date_signal</TD><TD>Raw input signal</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>year_signal</TD><TD>Raw input signal</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>stopwatch_signal</TD><TD>Raw input signal</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>mode_signal</TD><TD>Raw input signal</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> DisplayDecoder

<textblock type="annotcomp" expanded="false">  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> time_signal <font color="darkgreen">&quot;Raw input signal&quot;</font>;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> large_digit_1;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> large_digit_2;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> large_digit_3;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> large_digit_4;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> small_digit;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> text_digit;
  <A HREF="Modelica_StateGraph2_Blocks_MathInteger.html#Modelica_StateGraph2.Blocks.MathInteger.MultiSwitch"
>Modelica_StateGraph2.Blocks.MathInteger.MultiSwitch</A> digit1_decoder(
    use_pre_as_default=false,
    nu=5,
    expr={<font color="red">div</font>(<font color="red">mod</font>(<font color="red">div</font>(time_signal, 3600), 12), 10),<font color="red">div</font>(<font color="red">mod</font>(<font color="red">div</font>(time_signal,
        3600), 24), 10),<font color="red">div</font>(<font color="red">mod</font>(<font color="red">div</font>(date_signal, 100), 12), 10),<font color="red">div</font>(<font color="red">mod</font>(
        year_signal, 10000), 1000),<font color="red">div</font>(<font color="red">mod</font>(<font color="red">div</font>(<font color="red">div</font>(stopwatch_signal, 100),
        60), 60), 10)});
  <A HREF="Modelica_StateGraph2_Blocks_MathInteger.html#Modelica_StateGraph2.Blocks.MathInteger.MultiSwitch"
>Modelica_StateGraph2.Blocks.MathInteger.MultiSwitch</A> digit2_decoder(
    use_pre_as_default=false,
    nu=5,
    expr={<font color="red">mod</font>(<font color="red">mod</font>(<font color="red">div</font>(time_signal, 3600), 12), 10),<font color="red">mod</font>(<font color="red">mod</font>(<font color="red">div</font>(time_signal,
        3600), 24), 10),<font color="red">mod</font>(<font color="red">mod</font>(<font color="red">div</font>(date_signal, 100), 12), 10),<font color="red">div</font>(<font color="red">mod</font>(
        year_signal, 1000), 100),<font color="red">mod</font>(<font color="red">mod</font>(<font color="red">div</font>(<font color="red">div</font>(stopwatch_signal, 100), 60),
        60), 10)});
  <A HREF="Modelica_StateGraph2_Blocks_MathInteger.html#Modelica_StateGraph2.Blocks.MathInteger.MultiSwitch"
>Modelica_StateGraph2.Blocks.MathInteger.MultiSwitch</A> digit3_decoder(
    use_pre_as_default=false,
    nu=5,
    expr={<font color="red">div</font>(<font color="red">mod</font>(<font color="red">div</font>(time_signal, 60), 60), 10),<font color="red">div</font>(<font color="red">mod</font>(<font color="red">div</font>(time_signal,
        60), 60), 10),<font color="red">div</font>(<font color="red">mod</font>(<font color="red">mod</font>(date_signal, 100), 30), 10),<font color="red">div</font>(<font color="red">mod</font>(
        year_signal, 100), 10),<font color="red">div</font>(<font color="red">mod</font>(<font color="red">div</font>(stopwatch_signal, 100), 60), 10)});
  <A HREF="Modelica_StateGraph2_Blocks_MathInteger.html#Modelica_StateGraph2.Blocks.MathInteger.MultiSwitch"
>Modelica_StateGraph2.Blocks.MathInteger.MultiSwitch</A> digit4_decoder(
    use_pre_as_default=false,
    nu=5,
    expr={<font color="red">mod</font>(<font color="red">mod</font>(<font color="red">div</font>(time_signal, 60), 10), 10),<font color="red">mod</font>(<font color="red">mod</font>(<font color="red">div</font>(time_signal,
        60), 10), 10),<font color="red">mod</font>(<font color="red">mod</font>(<font color="red">mod</font>(date_signal, 100), 30), 10),<font color="red">mod</font>(
        year_signal, 10),<font color="red">mod</font>(<font color="red">mod</font>(<font color="red">div</font>(stopwatch_signal, 100), 60), 10)});
  <A HREF="Modelica_StateGraph2_Blocks_MathInteger.html#Modelica_StateGraph2.Blocks.MathInteger.MultiSwitch"
>Modelica_StateGraph2.Blocks.MathInteger.MultiSwitch</A>
  text_digit_decoder(
    use_pre_as_default=false,
    nu=5,
    expr={<font color="blue">if </font><font color="red">mod</font>(<font color="red">div</font>(time_signal, 3600), 24) &lt; 12<font color="blue"> then </font>8<font color="blue"> else </font>9,-1,
        day_signal,-1,11});
  <A HREF="Modelica_StateGraph2_Blocks_MathInteger.html#Modelica_StateGraph2.Blocks.MathInteger.MultiSwitch"
>Modelica_StateGraph2.Blocks.MathInteger.MultiSwitch</A>
  small_digit_decoder(
    use_pre_as_default=false,
    nu=5,
    expr={12,24,-1,-1,<font color="red">mod</font>(stopwatch_signal, 100)});
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</A> time_mode <font color="darkgreen">&quot;Raw input signal&quot;</font>;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</A> date_mode <font color="darkgreen">&quot;Raw input signal&quot;</font>;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</A> year_mode <font color="darkgreen">&quot;Raw input signal&quot;</font>;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</A> stopwatch_mode <font color="darkgreen">&quot;Raw input signal&quot;</font>;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Logical.html#Modelica.Blocks.Logical.And"
>Modelica.Blocks.Logical.And</A> and1;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Logical.html#Modelica.Blocks.Logical.And"
>Modelica.Blocks.Logical.And</A> and2;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Logical.html#Modelica.Blocks.Logical.Not"
>Modelica.Blocks.Logical.Not</A> not1;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> day_signal <font color="darkgreen">&quot;Raw input signal&quot;</font>;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> date_signal <font color="darkgreen">&quot;Raw input signal&quot;</font>;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> year_signal <font color="darkgreen">&quot;Raw input signal&quot;</font>;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> stopwatch_signal <font color="darkgreen">&quot;Raw input signal&quot;</font>;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> mode_signal <font color="darkgreen">&quot;Raw input signal&quot;</font>;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.BooleanExpression"
>Modelica.Blocks.Sources.BooleanExpression</A> booleanExpression(y=<font color="red">mod</font>(
        mode_signal, 2) &lt; 0.5);</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(large_digit_1, digit1_decoder.y);
  <font color="red">connect</font>(digit2_decoder.y, large_digit_2);
  <font color="red">connect</font>(digit3_decoder.y, large_digit_3);
  <font color="red">connect</font>(digit4_decoder.y, large_digit_4);
  <font color="red">connect</font>(small_digit_decoder.y, small_digit);
  <font color="red">connect</font>(text_digit_decoder.y, text_digit);
  <font color="red">connect</font>(and1.u2, time_mode);
  <font color="red">connect</font>(not1.y, and2.u1);
  <font color="red">connect</font>(and1.y, digit1_decoder.u[1]);
  <font color="red">connect</font>(and1.y, digit2_decoder.u[1]);
  <font color="red">connect</font>(and1.y, digit3_decoder.u[1]);
  <font color="red">connect</font>(and1.y, digit4_decoder.u[1]);
  <font color="red">connect</font>(and1.y, small_digit_decoder.u[1]);
  <font color="red">connect</font>(and1.y, text_digit_decoder.u[1]);
  <font color="red">connect</font>(and2.y, digit1_decoder.u[2]);
  <font color="red">connect</font>(and2.y, digit2_decoder.u[2]);
  <font color="red">connect</font>(and2.y, digit3_decoder.u[2]);
  <font color="red">connect</font>(and2.y, digit4_decoder.u[2]);
  <font color="red">connect</font>(and2.y, small_digit_decoder.u[2]);
  <font color="red">connect</font>(and2.y, text_digit_decoder.u[2]);
  <font color="red">connect</font>(time_mode, and2.u2);
  <font color="red">connect</font>(date_mode, digit1_decoder.u[3]);
  <font color="red">connect</font>(date_mode, digit2_decoder.u[3]);
  <font color="red">connect</font>(date_mode, digit3_decoder.u[3]);
  <font color="red">connect</font>(date_mode, digit4_decoder.u[3]);
  <font color="red">connect</font>(date_mode, small_digit_decoder.u[3]);
  <font color="red">connect</font>(date_mode, text_digit_decoder.u[3]);
  <font color="red">connect</font>(year_mode, digit1_decoder.u[4]);
  <font color="red">connect</font>(year_mode, digit2_decoder.u[4]);
  <font color="red">connect</font>(year_mode, digit3_decoder.u[4]);
  <font color="red">connect</font>(year_mode, digit4_decoder.u[4]);
  <font color="red">connect</font>(year_mode, small_digit_decoder.u[4]);
  <font color="red">connect</font>(year_mode, text_digit_decoder.u[4]);
  <font color="red">connect</font>(stopwatch_mode, digit1_decoder.u[5]);
  <font color="red">connect</font>(stopwatch_mode, digit2_decoder.u[5]);
  <font color="red">connect</font>(stopwatch_mode, digit3_decoder.u[5]);
  <font color="red">connect</font>(stopwatch_mode, digit4_decoder.u[5]);
  <font color="red">connect</font>(stopwatch_mode, small_digit_decoder.u[5]);
  <font color="red">connect</font>(stopwatch_mode, text_digit_decoder.u[5]);
  <font color="red">connect</font>(booleanExpression.y, and1.u1);
  <font color="red">connect</font>(not1.u, booleanExpression.y);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>DisplayDecoder;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE AlarmTrigger<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.AlarmTriggerI.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.AlarmTrigger" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.AlarmTrigger"></A><A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities"
>Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities</A>.AlarmTrigger</H2>
<IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.AlarmTriggerD.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.AlarmTrigger">
<P><H3>Information</H3></P>
<PRE></pre>
<p>Logic for deciding whether any alarm should sound. The logic is defined in D. Harel&apos;s paper (see reference on package level) as:</p>
<p><br/>T1 is the time set when alarm1 will sound.</p>
<p>T2 is the time set when alarm1 will sound.</p>
<p>P1 = alarm1 enabled <b>and</b> (alarm2 disabled <b>or</b> <b>not</b> T1 == T2)</p>
<p>P2 = alarm2 enabled <b>and</b> (alarm1 disabled <b>or</b> <b>not</b> T1 == T2)</p>
<p>P = alarm1 enabled <b>and</b> alarm2 enabled <b>and</b> T1 == T2</p>
<p><br/>Alarm 1 will beep when time becomes equal to T1 and P1 is true.</p>
<p>Alarm 2 will beep when time becomes equal to T2 and P2 is true.</p>
<p>Both alarms will beep when time becomes equal to T1 and P is true.</p>
<pre></PRE><P>

<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>alarm1_enabled</TD><TD>&nbsp;</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>alarm2_enabled</TD><TD>&nbsp;</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>T1</TD><TD>&nbsp;</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>T2</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanOutput"
>BooleanOutput</A></TD><TD>P1</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanOutput"
>BooleanOutput</A></TD><TD>P2</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanOutput"
>BooleanOutput</A></TD><TD>P</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanOutput"
>BooleanOutput</A></TD><TD>alarms_beep</TD><TD>&nbsp;</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>T_hits_T1</TD><TD>&nbsp;</TD></TR>
<TR><TD>input <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>T_hits_T2</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> AlarmTrigger

<textblock type="annotcomp" expanded="false">  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</A> alarm1_enabled;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</A> alarm2_enabled;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> T1;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> T2;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanOutput"
>Modelica.Blocks.Interfaces.BooleanOutput</A> P1;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanOutput"
>Modelica.Blocks.Interfaces.BooleanOutput</A> P2;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanOutput"
>Modelica.Blocks.Interfaces.BooleanOutput</A> P;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanOutput"
>Modelica.Blocks.Interfaces.BooleanOutput</A> alarms_beep;
  <A HREF="Modelica_StateGraph2_Blocks_MathBoolean.html#Modelica_StateGraph2.Blocks.MathBoolean.Or"
>Modelica_StateGraph2.Blocks.MathBoolean.Or</A> or1(
                                nu=2);
  <A HREF="Modelica_StateGraph2_Blocks_MathBoolean.html#Modelica_StateGraph2.Blocks.MathBoolean.And"
>Modelica_StateGraph2.Blocks.MathBoolean.And</A> and1(
                                  nu=3);
  <A HREF="Modelica_StateGraph2_Blocks_MathBoolean.html#Modelica_StateGraph2.Blocks.MathBoolean.And"
>Modelica_StateGraph2.Blocks.MathBoolean.And</A> and3(
                                  nu=4);
  <A HREF="Modelica_StateGraph2_Blocks_MathInteger.html#Modelica_StateGraph2.Blocks.MathInteger.Sum"
>Modelica_StateGraph2.Blocks.MathInteger.Sum</A> sum(
                                       k={1,-1}, nu=2);
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.IntegerToBoolean"
>Modelica.Blocks.Math.IntegerToBoolean</A> integerToBoolean;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Logical.html#Modelica.Blocks.Logical.Not"
>Modelica.Blocks.Logical.Not</A> not1;
  <A HREF="Modelica_StateGraph2_Blocks_MathBoolean.html#Modelica_StateGraph2.Blocks.MathBoolean.Or"
>Modelica_StateGraph2.Blocks.MathBoolean.Or</A> or2(
                                nu=1);
  <A HREF="Modelica_StateGraph2_Blocks_MathBoolean.html#Modelica_StateGraph2.Blocks.MathBoolean.And"
>Modelica_StateGraph2.Blocks.MathBoolean.And</A> and2(
                                  nu=3);
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Logical.html#Modelica.Blocks.Logical.Not"
>Modelica.Blocks.Logical.Not</A> not2;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Logical.html#Modelica.Blocks.Logical.Not"
>Modelica.Blocks.Logical.Not</A> not3;
  <A HREF="Modelica_StateGraph2_Blocks_MathBoolean.html#Modelica_StateGraph2.Blocks.MathBoolean.Or"
>Modelica_StateGraph2.Blocks.MathBoolean.Or</A> or3(
                                nu=3);
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</A> T_hits_T1;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</A> T_hits_T2;</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(integerToBoolean.u,sum. y);
  <font color="red">connect</font>(alarm2_enabled, not1.u);
  <font color="red">connect</font>(not1.y, or1.u[1]);
  <font color="red">connect</font>(and1.y, P1);
  <font color="red">connect</font>(and2.y, P2);
  <font color="red">connect</font>(alarm2_enabled, and2.u[1]);
  <font color="red">connect</font>(not2.u, alarm1_enabled);
  <font color="red">connect</font>(not2.y, or2.u[1]);
  <font color="red">connect</font>(not3.u, integerToBoolean.y);
  <font color="red">connect</font>(alarm1_enabled, and1.u[1]);
  <font color="red">connect</font>(or1.y, and1.u[2]);
  <font color="red">connect</font>(integerToBoolean.y, or1.u[2]);
  <font color="red">connect</font>(alarm1_enabled, and3.u[1]);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(alarm2_enabled, and3.u[2]);
  <font color="red">connect</font>(not3.y, and3.u[3]);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(or3.y, alarms_beep);
  <font color="red">connect</font>(or3.u[1], and1.y);
  <font color="red">connect</font>(or3.u[2], and2.y);
  <font color="red">connect</font>(or3.u[3], and3.y);
  <font color="red">connect</font>(P, and3.y);
  <font color="red">connect</font>(T1, sum.u[1]);
  <font color="red">connect</font>(T2, sum.u[2]);
  <font color="red">connect</font>(T_hits_T1, and1.u[3]);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(or2.y, and2.u[2]);
  <font color="red">connect</font>(T_hits_T2, and2.u[3]);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(T_hits_T1, and3.u[4]);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>AlarmTrigger;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE WatchController<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchControllerI.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchController" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchController"></A><A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities"
>Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities</A>.WatchController</H2>
<IMG SRC="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchControllerD.png" ALT="Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.WatchController">
<P><H3>Information</H3></P>
<PRE></pre>
<p>The watch controller contains the clock functionality, gathering of stopwatch signals, time settings and modes from different parts of the wristwatch that are gathered, grouped together and finally decoded into outputs to the LED display.</p>
<pre></PRE><P>

<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.SignalBus"
>SignalBus</A></TD><TD>display_node</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>IntegerOutput</A></TD><TD>large_digit1</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>IntegerOutput</A></TD><TD>large_digit2</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>IntegerOutput</A></TD><TD>large_digit3</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>IntegerOutput</A></TD><TD>large_digit4</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>IntegerOutput</A></TD><TD>small_digit</TD><TD>&nbsp;</TD></TR>
<TR><TD>output <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>IntegerOutput</A></TD><TD>text_digit</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> WatchController
<font color="blue">import </font><A HREF="Modelica_StateGraph2.html#Modelica_StateGraph2"
>Modelica_StateGraph2</A>;
<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.Time"
>Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.Time</A>
  Time;
  <A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.DisplayDecoder"
>DisplayDecoder</A> displayController;
<font color="blue">public </font>
  <A HREF="Modelica_StateGraph2_Blocks_MathBoolean.html#Modelica_StateGraph2.Blocks.MathBoolean.Or"
>Modelica_StateGraph2.Blocks.MathBoolean.Or</A> time_mode(    nu=5);
<font color="blue">public </font>
  <A HREF="Modelica_StateGraph2_Blocks_MathBoolean.html#Modelica_StateGraph2.Blocks.MathBoolean.Or"
>Modelica_StateGraph2.Blocks.MathBoolean.Or</A> date_mode(    nu=2);
<font color="blue">public </font>
  <A HREF="Modelica_StateGraph2_Examples_Applications_HarelsWristWatch_Utilities.html#Modelica_StateGraph2.Examples.Applications.HarelsWristWatch.Utilities.SignalBus"
>SignalBus</A> display_node;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> large_digit1;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> large_digit2;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> large_digit3;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> large_digit4;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> small_digit;
  <A HREF="../../Modelica 3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerOutput"
>Modelica.Blocks.Interfaces.IntegerOutput</A> text_digit;</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(time_mode.u[1],display_node. time_active);
  <font color="red">connect</font>(time_mode.u[2],display_node. show_time);
  <font color="red">connect</font>(time_mode.u[3],display_node. in_alarm1);
  <font color="red">connect</font>(time_mode.u[4],display_node. in_alarm2);
  <font color="red">connect</font>(time_mode.u[5],display_node. in_chime);
  <font color="red">connect</font>(displayController.time_mode,time_mode. y);
  <font color="red">connect</font>(displayController.year_mode,display_node. show_year);
  <font color="red">connect</font>(Time.y,displayController. time_signal);
  <font color="red">connect</font>(date_mode.y,displayController. date_mode);
  <font color="red">connect</font>(date_mode.u[1],display_node. date_active);
  <font color="red">connect</font>(date_mode.u[2],display_node. show_date);
  <font color="red">connect</font>(displayController.stopwatch_mode, display_node.stopwatch_mode);
  <font color="red">connect</font>(Time.signalBus, display_node);
  <font color="red">connect</font>(displayController.mode_signal, display_node.mode_setting);
  <font color="red">connect</font>(displayController.date_signal, display_node.date_setting);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(displayController.year_signal, display_node.year_setting);
  <font color="red">connect</font>(displayController.stopwatch_signal, display_node.stopwatch_time);
  <font color="red">connect</font>(displayController.day_signal, display_node.day_setting);
  <font color="red">connect</font>(displayController.large_digit_1, large_digit1);
  <font color="red">connect</font>(displayController.large_digit_2, large_digit2);
  <font color="red">connect</font>(displayController.large_digit_3, large_digit3);
  <font color="red">connect</font>(displayController.large_digit_4, large_digit4);
  <font color="red">connect</font>(displayController.small_digit, small_digit);
  <font color="red">connect</font>(displayController.text_digit, text_digit);
  <font color="red">connect</font>(time_mode.u[5], display_node.in_chime);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>WatchController;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 17:27:04 2010.
</address></BODY>
</HTML>
